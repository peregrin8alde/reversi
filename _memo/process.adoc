= 開発プロセス

== 開発ルール

このプロジェクトにおいては以下のルールとする。

* ソース管理として GitLab を利用
* エディタとして VSCode を利用
** `.gitignore` の記述内容は https://github.com/github/gitignore/blob/main/Global/VisualStudioCode.gitignore[A collection of .gitignore templates のもの]を
参考にし、設定ファイル関連はチーム内で共有する想定で設定すること
* プロジェクトの構成は以下
+
--
ビルド生産物（リリース対象）ごとにプロジェクトを作成し、生産物の単位は開発に使うフレームワークやビルドツールに合わせる。
最初に全体を統括するためのプロジェクトを作成し、設計を進めるうえで生産物が増えるたびに git サブモジュール用プロジェクトを追加する。
（ git サブモジュールを使うべきかどうかは別途検討が必要。ここでは練習のためにこの構成とする）

* プロジェクト全体用グループ
** 全体統括用プロジェクト
** サブモジュール用グループ
*** プロジェクト A
*** プロジェクト B
--
* 各プロジェクトのリポジトリには以下のものが含まれる
** ドキュメント
** ソース
** ビルド用資材
* ドキュメントは基本 Asciidoc 形式で作成。ただし、 `README.md` については Markdown 形式で作成（ GitLab が作成する
テンプレートを元に、簡単な内容に留めたものとする）
* git 関連の操作については、基本的にはコマンドラインで実施
** VSCode の GUI 上でも色々可能だが、練習のため
* ブランチ管理は GitLab Flow
** https://about.gitlab.com/ja-jp/topics/version-control/what-is-gitlab-flow/[GitLab Flowとは]
** https://about.gitlab.com/ja-jp/topics/version-control/what-are-gitlab-flow-best-practices/[GitLab Flowのベストプラクティスとは？]
** `main` ブランチは常にリリース可能な状態のブランチ
** 開発用として `main` から `feature/開発内容` ブランチを作成し、テストが終わったら `main` ブランチにマージ（元ブランチは削除）して再テスト
** リリース用として `production` ブランチを作成し、リリース用バージョン作成時に `main` ブランチをマージして本番環境にデプロ
*** `main` ブランチは常にリリース可能な想定だが、更新するたびに即本番環境にデプロイしたいとは限らないため
*** `production` ブランチはリリースタイミング以外では更新されないことになる
** 本番用デプロイの前に検証用デプロイをする場合は `staging` ブランチを用意し `main` と `production` の間に挟む
** バグ修正用として `main` から `hotfix/修正内容` ブランチを作成し、開発用ブランチと同様の作業を実施
** 基本的にブランチの作成は GitLab 上で以下の流れで実施
... ブランチで達成したいことを `issue` として発行する。これを close するコミットがそのブランチの最終コミットとなる。
GitLab の場合、 issue 作成からの流れでマージリクエストを作成するとマージの説明に自動でクローズするときの文字列が入るので、
そのままにすればマージした時点で issue もクローズされるしブランチも削除する設定にしておけばブランチも削除されて便利。
... 発行した `issue` からブランチ（ブランチ名は `feature/<issue 番号>-開発内容` など）＋マージリクエストを作成
* 基本的にドキュメント／メッセージには日本語を使うが、将来性を考慮して多言語対応を意識したディレクトリ／ファイル構成や実装にすること
* コミットルール
** コミットタイミング : 検討中
** スカッシュ有無 : 検討中
** コメント内容 : テンプレートを用意（ `commit.template` ）
*** テンプレート内容 : 検討中
** コミット時メッセージエディタ : 環境に合わせて任意のものを利用（ `commit.template` ）
* ブランチ名命名規約 : 検討中
* ユーザ I/F において、不当な入力に対してはエラーとするのではなく入力そのものが不可能な状態を理想とする。
例えば、 X/Y 座標の指定が必要な場合、指定可能な座標の一覧を表示して入力可能なキーを限定しその他のキー入力には
反応しないなど（選択肢を少数に抑えることで、無効な入力だから反応がないということが説明なしに分かる状態とする）
* ライセンスについて
+
--
基本的にはオープンソースソフトウェア（ OSS ）としての開発を想定する。
ライセンスとしては著作権、特許権、商標権などあり、有名な OSS ライセンスの種類としても色々あるが、
ここでは https://www.apache.org/licenses/LICENSE-2.0[Apache License, Version 2.0] を基本的に適用する。
ドキュメント限定で https://creativecommons.org/share-your-work/cclicenses/[Creative Commons licenses] も
適用するかどうか検討中
--
* ビルド用スクリプトはプロジェクトのルート直下に配置
** ビルドツール（検討中）を使う場合は各ツールに合わせる。



== 開発の流れ

. プロジェクトグループの作成
. 全体統括用プロジェクトの作成
. リポジトリの作成
+
プロジェクト作成時に `README.md` 付きで初期化する。
. 目的別ブランチの作成
. リポジトリのクローン
. `README.md` の修正
+
プロジェクト作成時に作成されるテンプレートをベースに、簡単な概要までを記載する。
検討中の箇所については空白とし、開発を進めるうえで適宜更新していく。
. 開発規約の策定
+
本メモを元にして開発規約書を作成予定
. 要件定義書の作成
+
システムが達成すべき要件を説明する要件定義書を作成する。
. 仕様書の作成
+
要件定義書に書かれた内容を達成するためにシステムで実現すべき状態を網羅した仕様書を作成する。
. 設計書の作成
+
--
仕様書に書かれた状態を実現するために何をするべきかを網羅した設計書を作成する。
生産物が増えた場合は以下の作業が発生する。

. サブリポジトリ用プロジェクトの作成
. サブリポジトリの設定

設計書は主に以下の 2 種類が存在する。

* 基本設計書（ Basic Design Document ） : 以下のような外部設計を行う。
** 機能設計（ Functional Design ） : どのような機能を持つかなど
** ユーザーインターフェース設計（ User Interface Design ） : どのような画面なのかなど
* 詳細設計書（ Detailed Design Document ） : 以下のような内部設計を行う。
** 各機能がどのように実装されるかなど


基本設計には仕様書に書かれた状態を実現していることをどうやって確認するか＝テスト方法も含める。
テスト詳細などのテスト設計書との切り分けについては検討中。
実際にどんなテストがあってどれを実行するかといったものはテスト計画書やテスト仕様書として別途用意する。
詳細設計においても、作りが正しいことを保証するためのテストを基準に実装するテスト駆動開発（ TDD ）
をする想定でテストを意識した設計を行う。

設計時には以下のようなアーキテクチャを参考にする。それぞれ一長一短があるはずなので、それを意識すること。
何を参考にしても良いが、何も参考にしなかったり長所や短所を意識せず適当に混ぜ合わせるようなことはしないこと。

* MVC / MVVM
* 三層アーキテクチャ / レイヤードアーキテクチャ
* https://alistair.cockburn.us/hexagonal-architecture/[ヘキサゴナルアーキテクチャ]
* https://jeffreypalermo.com/tag/onion-architecture/[オニオンアーキテクチャ]
* https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html[クリーンアーキテクチャ]

--
. テスト仕様書の作成
+
--
参考 : https://jstqb.jp/syllabus.html[ISTQB テスト技術者資格制度 シラバス]
--
. タスク作成とスケジューリング
+
可能な限りタスクは一覧として見える化し、 `issue` としてどう消化していくかマイルストーンを作成するなどの
スケジューリングを行う。タスクの増加や変更に応じて適宜更新していく。
. ビルド用スクリプトの新規作成
+
CI/CD サイクルを開始できるように、必ず成功するビルド用スクリプトを用意する。
. CI/CD 用設定ファイルの作成
+
CI/CD サイクルを開始するために `.gitlab-ci.yml` を作成する。

